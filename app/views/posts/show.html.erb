<% content_for :title, "#{@post.title}" %>
<% content_for :description, @post.content.to_plain_text.truncate(300) %>
<% content_for :structured_data, @post.structured_data(cl_image_path @post.photo.key) %>
<% canonical(post_url(@post)) %>
<% content_for :image,
  cl_image_path(@post.photo.key, transformation: [
    { width: 1200, height: 630, crop: :fill, color: "black", effect: "colorize:50" },
    { overlay: "logo_white.png" },
    { flags: "layer_apply", width: 300, gravity: "west", y: -50, x:100 , crop: :scale },
    { overlay: {font_family: "Verdana", font_size: "30px", text: @post.title }, gravity: "west", y: 50, x:100 , color: "white", width: 800, crop: "fit" }
    ])
%>

<div class="white-wrapper-narrow-content">
  <h1 class="d-none"><%= @post.title %></h1>
  <h2 class="center-text primary-text-color mb-5 mt-5">Le blog de <span class="stress">Demain</span> ðŸ™Œ</h2>

  <div class="full-width post-ctn">
    <%= @post.photo.attached? ? cl_image_tag(@post.photo.key, alt: "illustration de #{@post.title}") : image_tag('bannerbg.jpg', alt: "illustration de #{@post.title}") %>
    <h2 class="primary-text-color bold-7 mt-3 mb-2"> <%= @post.title %></h2>
    <h6 class="mb-5"><%= @post.published_ago %></h6>
    <div class="post-body">
      <%= @post.content %>
    </div>
    <div class="d-flex full-width justify-content-center">
      <%= link_to 'Retour', blog_path, class: "button btn-light-flag mt-5" %>
    </div>
  </div>

  <div class="flex-resp justify-content-center align-items-center mt-5" data-controller="contact">
    <h6 class="primary-text-color m-2 center-text">Pour rester informÃ©Â·e de nos actus : </h6>
    <a class="button btn-flag-color" href="" data-action="click->contact#popup">Inscription</a>
    <%= render partial: "pages/contact" %>
  </div>
</div>
